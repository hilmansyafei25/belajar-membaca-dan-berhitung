<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Belajar Membaca dan Berhitung</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Comic Sans MS', 'Chalkboard', 'Arial Rounded MT Bold', sans-serif;
            background: linear-gradient(135deg, #FFE066 0%, #FF6B9D 50%, #87CEEB 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 20px;
            margin-bottom: 30px;
        }

        h1 {
            color: #FF4081;
            font-size: 2.5rem;
            text-shadow: 3px 3px 0 #FFD700, 5px 5px 0 rgba(0,0,0,0.1);
            margin-bottom: 10px;
        }

        .subtitle {
            color: #4A148C;
            font-size: 1.2rem;
        }

        .tabs {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .tab-btn {
            padding: 15px 40px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: inherit;
            font-weight: bold;
        }

        .tab-btn.reading {
            background: linear-gradient(145deg, #FF6B6B, #FF8E53);
            color: white;
            box-shadow: 0 6px 0 #CC5544;
        }

        .tab-btn.counting {
            background: linear-gradient(145deg, #4ECDC4, #44A08D);
            color: white;
            box-shadow: 0 6px 0 #2D8A80;
        }

        .tab-btn:hover {
            transform: translateY(-3px);
        }

        .tab-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #CC5544;
        }

        .tab-btn.active {
            transform: scale(1.1);
        }

        .section {
            display: none;
            background: white;
            border-radius: 30px;
            padding: 30px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .section-title {
            text-align: center;
            color: #6A1B9A;
            font-size: 1.8rem;
            margin-bottom: 25px;
        }

        /* Reading Section */
        .alphabet-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(70px, 1fr));
            gap: 10px;
            margin-bottom: 30px;
        }

        .letter-card {
            background: linear-gradient(145deg, #FFD93D, #FF6B6B);
            border: none;
            border-radius: 15px;
            padding: 15px;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            text-shadow: 2px 2px 0 rgba(0,0,0,0.2);
            box-shadow: 0 4px 0 #CC4444;
        }

        .letter-card:hover {
            transform: translateY(-5px) scale(1.1);
            box-shadow: 0 8px 0 #CC4444;
        }

        .letter-card:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 #CC4444;
        }

        .word-display {
            text-align: center;
            padding: 30px;
            background: linear-gradient(145deg, #E8F5E9, #C8E6C9);
            border-radius: 20px;
            margin-top: 20px;
        }

        .word-display h3 {
            color: #2E7D32;
            font-size: 1.3rem;
            margin-bottom: 15px;
        }

        .current-word {
            font-size: 3rem;
            color: #1565C0;
            margin: 10px 0;
            letter-spacing: 8px;
        }

        .word-image {
            font-size: 4rem;
            margin: 10px 0;
        }

        .syllables {
            font-size: 1.5rem;
            color: #6A1B9A;
            margin-top: 10px;
        }

        .syllables span {
            background: #FFE082;
            padding: 5px 15px;
            border-radius: 20px;
            margin: 0 5px;
            display: inline-block;
        }

        /* Counting Section */
        .counting-area {
            text-align: center;
        }

        .number-display {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 30px;
            flex-wrap: wrap;
        }

        .number-box {
            background: linear-gradient(145deg, #7C4DFF, #536DFE);
            color: white;
            font-size: 4rem;
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 20px;
            box-shadow: 0 6px 0 #4527A0;
        }

        .operator {
            font-size: 3rem;
            color: #FF4081;
        }

        .answer-input {
            font-size: 2.5rem;
            width: 120px;
            height: 80px;
            text-align: center;
            border: 4px solid #7C4DFF;
            border-radius: 15px;
            outline: none;
        }

        .answer-input:focus {
            border-color: #FF4081;
            box-shadow: 0 0 20px rgba(255, 64, 129, 0.3);
        }

        .objects-display {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
            flex-wrap: wrap;
        }

        .object-group {
            background: #FFF8E1;
            padding: 20px;
            border-radius: 20px;
            min-width: 150px;
        }

        .objects {
            font-size: 2.5rem;
            line-height: 1.5;
        }

        .btn-group {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-top: 25px;
            flex-wrap: wrap;
        }

        .action-btn {
            padding: 15px 35px;
            font-size: 1.2rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .check-btn {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 4px 0 #2E7D32;
        }

        .next-btn {
            background: linear-gradient(145deg, #FF9800, #F57C00);
            color: white;
            box-shadow: 0 4px 0 #E65100;
        }

        .action-btn:hover {
            transform: translateY(-3px);
        }

        .action-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px 0 currentColor;
        }

        .feedback {
            font-size: 2rem;
            margin-top: 20px;
            padding: 15px;
            border-radius: 15px;
            display: none;
        }

        .feedback.show {
            display: block;
            animation: bounce 0.5s ease;
        }

        .feedback.correct {
            background: #C8E6C9;
            color: #2E7D32;
        }

        .feedback.incorrect {
            background: #FFCDD2;
            color: #C62828;
        }

        @keyframes bounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .score-display {
            text-align: center;
            margin-bottom: 20px;
        }

        .score {
            background: linear-gradient(145deg, #FFD700, #FFA000);
            color: #5D4037;
            padding: 10px 30px;
            border-radius: 30px;
            font-size: 1.3rem;
            display: inline-block;
        }

        .difficulty-selector {
            margin-bottom: 20px;
            text-align: center;
        }

        .difficulty-selector label {
            font-size: 1.1rem;
            color: #6A1B9A;
            margin-right: 10px;
        }

        .difficulty-selector select {
            padding: 10px 20px;
            font-size: 1rem;
            border-radius: 20px;
            border: 3px solid #7C4DFF;
            cursor: pointer;
            font-family: inherit;
        }

        /* Number Grid for learning */
        .number-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
            margin-bottom: 30px;
        }

        .number-card {
            background: linear-gradient(145deg, #4ECDC4, #2ECC71);
            border: none;
            border-radius: 15px;
            padding: 15px;
            font-size: 2rem;
            font-weight: bold;
            color: white;
            cursor: pointer;
            transition: all 0.2s ease;
            box-shadow: 0 4px 0 #229954;
        }

        .number-card:hover {
            transform: translateY(-5px) scale(1.1);
        }

        footer {
            text-align: center;
            margin-top: 30px;
            color: #6A1B9A;
            font-size: 0.9rem;
        }

        @media (max-width: 600px) {
            h1 { font-size: 1.8rem; }
            .tab-btn { padding: 12px 25px; font-size: 1rem; }
            .number-box { width: 70px; height: 70px; font-size: 2.5rem; }
            .answer-input { width: 80px; height: 60px; font-size: 2rem; }
        }

        /* Welcome Screen Styles */
        .welcome-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #FFE066 0%, #FF6B9D 50%, #87CEEB 100%);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }

        .welcome-screen.hidden {
            display: none;
        }

        .welcome-box {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.2);
            text-align: center;
            max-width: 450px;
            width: 90%;
            animation: fadeIn 0.5s ease;
        }

        .welcome-box h2 {
            color: #FF4081;
            font-size: 2rem;
            margin-bottom: 10px;
            text-shadow: 2px 2px 0 #FFD700;
        }

        .welcome-box p {
            color: #6A1B9A;
            font-size: 1.1rem;
            margin-bottom: 25px;
        }

        .welcome-emoji {
            font-size: 4rem;
            margin-bottom: 20px;
        }

        .name-input {
            width: 100%;
            padding: 15px 20px;
            font-size: 1.3rem;
            border: 4px solid #7C4DFF;
            border-radius: 20px;
            outline: none;
            font-family: inherit;
            text-align: center;
            margin-bottom: 20px;
        }

        .name-input:focus {
            border-color: #FF4081;
            box-shadow: 0 0 20px rgba(255, 64, 129, 0.3);
        }

        .start-btn {
            padding: 15px 50px;
            font-size: 1.3rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 6px 0 #2E7D32;
            transition: all 0.2s ease;
        }

        .start-btn:hover {
            transform: translateY(-3px);
        }

        .start-btn:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 #2E7D32;
        }

        .start-btn:disabled {
            background: #ccc;
            box-shadow: 0 6px 0 #999;
            cursor: not-allowed;
        }

        .user-greeting {
            color: #4A148C;
            font-size: 1.1rem;
            margin-top: 5px;
        }

        .main-content.hidden {
            display: none;
        }

        /* Change Name Modal */
        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .modal-overlay.hidden {
            display: none;
        }

        .modal-box {
            background: white;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
            text-align: center;
            max-width: 400px;
            width: 90%;
            animation: fadeIn 0.3s ease;
        }

        .modal-box h2 {
            color: #FF4081;
            font-size: 1.5rem;
            margin-bottom: 20px;
        }

        .modal-box .name-input {
            width: 100%;
            margin-bottom: 20px;
        }

        .modal-buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
        }

        .modal-btn {
            padding: 12px 30px;
            font-size: 1rem;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            font-family: inherit;
            font-weight: bold;
            transition: all 0.2s ease;
        }

        .save-btn {
            background: linear-gradient(145deg, #4CAF50, #45a049);
            color: white;
            box-shadow: 0 4px 0 #2E7D32;
        }

        .cancel-btn {
            background: linear-gradient(145deg, #9E9E9E, #757575);
            color: white;
            box-shadow: 0 4px 0 #616161;
        }

        .modal-btn:hover {
            transform: translateY(-2px);
        }

        .modal-btn:active {
            transform: translateY(2px);
        }

        .change-name-btn {
            background: linear-gradient(145deg, #9C27B0, #7B1FA2);
            color: white;
            border: none;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-family: inherit;
            font-size: 0.9rem;
            margin-top: 10px;
            box-shadow: 0 3px 0 #4A148C;
            transition: all 0.2s ease;
        }

        .change-name-btn:hover {
            transform: translateY(-2px);
        }

        .change-name-btn:active {
            transform: translateY(2px);
            box-shadow: 0 1px 0 #4A148C;
        }
    </style>
</head>
<body>
    <!-- Change Name Modal -->
    <div class="modal-overlay hidden" id="change-name-modal">
        <div class="modal-box">
            <h2>‚úèÔ∏è Ganti Nama</h2>
            <input type="text" class="name-input" id="new-name-input" placeholder="Ketik nama baru kamu..." maxlength="50">
            <div class="modal-buttons">
                <button class="modal-btn cancel-btn" onclick="closeChangeNameModal()">‚ùå Batal</button>
                <button class="modal-btn save-btn" onclick="saveName()">üíæ Simpan</button>
            </div>
        </div>
    </div>

    <!-- Welcome Screen -->
    <div class="welcome-screen" id="welcome-screen">
        <div class="welcome-box">
            <div class="welcome-emoji">üëãüéâ</div>
            <h2>Selamat Datang!</h2>
            <p>Siapa nama kamu?</p>
            <input type="text" class="name-input" id="name-input" placeholder="Ketik nama kamu di sini..." maxlength="50">
            <br>
            <button class="start-btn" id="start-btn" onclick="startApp()" disabled>üöÄ Mulai Belajar!</button>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content hidden" id="main-content">
    <div class="container">
        <header>
            <h1>üåü Belajar Membaca & Berhitung üåü</h1>
            <p class="subtitle">Ayo belajar sambil bermain! üéâ</p>
            <p class="user-greeting" id="user-greeting"></p>
            <button class="change-name-btn" onclick="openChangeNameModal()">‚úèÔ∏è Ganti Nama</button>
        </header>

        <div class="tabs">
            <button class="tab-btn reading active" onclick="showSection('reading')">üìö Membaca</button>
            <button class="tab-btn counting" onclick="showSection('counting')">üî¢ Berhitung</button>
        </div>

        <!-- Reading Section -->
        <div id="reading-section" class="section active">
            <h2 class="section-title">üìö Ayo Belajar Huruf dan Kata! üìö</h2>
            
            <div class="alphabet-grid" id="alphabet-grid">
                <!-- Letters will be generated by JavaScript -->
            </div>

            <div class="word-display" id="word-display">
                <h3>Klik huruf untuk melihat contoh kata! üëÜ</h3>
                <div class="word-image" id="word-image">üî§</div>
                <div class="current-word" id="current-word">A-B-C</div>
                <div class="syllables" id="syllables"></div>
            </div>
        </div>

        <!-- Counting Section -->
        <div id="counting-section" class="section">
            <h2 class="section-title">üî¢ Ayo Belajar Berhitung! üî¢</h2>
            
            <div class="difficulty-selector">
                <label for="difficulty">Tingkat Kesulitan:</label>
                <select id="difficulty" onchange="generateQuestion()">
                    <option value="easy">Mudah (1-10)</option>
                    <option value="medium">Sedang (1-20)</option>
                    <option value="hard">Sulit (1-50)</option>
                </select>
            </div>

            <div class="score-display">
                <span class="score">‚≠ê Skor: <span id="score">0</span></span>
            </div>

            <div class="number-display">
                <div class="number-box" id="num1">5</div>
                <div class="operator" id="operator">+</div>
                <div class="number-box" id="num2">3</div>
                <div class="operator">=</div>
                <input type="number" class="answer-input" id="answer-input" placeholder="?">
            </div>

            <div class="objects-display" id="objects-display">
                <div class="object-group">
                    <div class="objects" id="objects1">üçéüçéüçéüçéüçé</div>
                </div>
                <div class="object-group">
                    <div class="objects" id="objects2">üçéüçéüçé</div>
                </div>
            </div>

            <div class="btn-group">
                <button class="action-btn check-btn" onclick="checkAnswer()">‚úÖ Periksa</button>
                <button class="action-btn next-btn" onclick="generateQuestion()">‚û°Ô∏è Soal Baru</button>
            </div>

            <div class="feedback" id="feedback"></div>

            <h3 style="text-align: center; color: #6A1B9A; margin-top: 30px;">üìä Belajar Angka 1-10</h3>
            <div class="number-grid" id="number-grid">
                <!-- Numbers will be generated by JavaScript -->
            </div>
        </div>

        <footer>
            <p>Dibuat dengan ‚ù§Ô∏è untuk anak-anak Indonesia</p>
        </footer>
    </div>
    </div>

    <script>
        // User name storage
        let userName = '';

        // Check if user has already entered their name
        function checkExistingUser() {
            const savedName = localStorage.getItem('userName');
            if (savedName) {
                userName = savedName;
                showMainContent();
            }
        }

        // Enable/disable start button based on name input
        function setupNameInput() {
            const nameInput = document.getElementById('name-input');
            const startBtn = document.getElementById('start-btn');
            
            nameInput.addEventListener('input', function() {
                const trimmedValue = this.value.trim();
                startBtn.disabled = trimmedValue.length === 0;
            });
            
            nameInput.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim().length > 0) {
                    startApp();
                }
            });
        }

        // Start the app after name is entered
        function startApp() {
            const nameInput = document.getElementById('name-input');
            const name = nameInput.value.trim();
            
            if (name.length === 0) return;
            
            userName = name;
            localStorage.setItem('userName', userName);
            showMainContent();
        }

        // Show main content and hide welcome screen
        function showMainContent() {
            document.getElementById('welcome-screen').classList.add('hidden');
            document.getElementById('main-content').classList.remove('hidden');
            document.getElementById('user-greeting').textContent = `Halo, ${userName}! üëã`;
            init();
        }

        // Open change name modal
        function openChangeNameModal() {
            const modal = document.getElementById('change-name-modal');
            const input = document.getElementById('new-name-input');
            input.value = userName;
            modal.classList.remove('hidden');
            input.focus();
            input.select();
        }

        // Close change name modal
        function closeChangeNameModal() {
            document.getElementById('change-name-modal').classList.add('hidden');
        }

        // Save new name
        function saveName() {
            const input = document.getElementById('new-name-input');
            const newName = input.value.trim();
            
            if (newName.length === 0) {
                input.focus();
                return;
            }
            
            userName = newName;
            localStorage.setItem('userName', userName);
            document.getElementById('user-greeting').textContent = `Halo, ${userName}! üëã`;
            closeChangeNameModal();
        }

        // Handle Enter key in change name modal
        function setupChangeNameInput() {
            const input = document.getElementById('new-name-input');
            input.addEventListener('keypress', function(e) {
                if (e.key === 'Enter' && this.value.trim().length > 0) {
                    saveName();
                }
            });
        }

        // Word data for reading section
        const wordData = {
            'A': { word: 'APEL', syllables: ['A', 'PEL'], emoji: 'üçé' },
            'B': { word: 'BOLA', syllables: ['BO', 'LA'], emoji: '‚öΩ' },
            'C': { word: 'CERI', syllables: ['CE', 'RI'], emoji: 'üçí' },
            'D': { word: 'DADU', syllables: ['DA', 'DU'], emoji: 'üé≤' },
            'E': { word: 'ELANG', syllables: ['E', 'LANG'], emoji: 'ü¶Ö' },
            'F': { word: 'FOTO', syllables: ['FO', 'TO'], emoji: 'üì∑' },
            'G': { word: 'GAJAH', syllables: ['GA', 'JAH'], emoji: 'üêò' },
            'H': { word: 'HARIMAU', syllables: ['HA', 'RI', 'MAU'], emoji: 'üêØ' },
            'I': { word: 'IKAN', syllables: ['I', 'KAN'], emoji: 'üêü' },
            'J': { word: 'JERUK', syllables: ['JE', 'RUK'], emoji: 'üçä' },
            'K': { word: 'KUCING', syllables: ['KU', 'CING'], emoji: 'üê±' },
            'L': { word: 'LAMPU', syllables: ['LAM', 'PU'], emoji: 'üí°' },
            'M': { word: 'MATAHARI', syllables: ['MA', 'TA', 'HA', 'RI'], emoji: '‚òÄÔ∏è' },
            'N': { word: 'NANAS', syllables: ['NA', 'NAS'], emoji: 'üçç' },
            'O': { word: 'ORANG', syllables: ['O', 'RANG'], emoji: 'üë§' },
            'P': { word: 'PANDA', syllables: ['PAN', 'DA'], emoji: 'üêº' },
            'Q': { word: 'KURMA', syllables: ['KUR', 'MA'], emoji: 'üå¥' },
            'R': { word: 'RUMAH', syllables: ['RU', 'MAH'], emoji: 'üè†' },
            'S': { word: 'SINGA', syllables: ['SI', 'NGA'], emoji: 'ü¶Å' },
            'T': { word: 'TOPI', syllables: ['TO', 'PI'], emoji: 'üé©' },
            'U': { word: 'ULAR', syllables: ['U', 'LAR'], emoji: 'üêç' },
            'V': { word: 'VIOLIN', syllables: ['VI', 'O', 'LIN'], emoji: 'üéª' },
            'W': { word: 'WORTEL', syllables: ['WOR', 'TEL'], emoji: 'ü•ï' },
            'X': { word: 'XILOFON', syllables: ['XI', 'LO', 'FON'], emoji: 'üéµ' },
            'Y': { word: 'YOYO', syllables: ['YO', 'YO'], emoji: 'ü™Ä' },
            'Z': { word: 'ZEBRA', syllables: ['ZE', 'BRA'], emoji: 'ü¶ì' }
        };

        // Emojis for counting
        const countingEmojis = ['üçé', '‚≠ê', 'üå∏', 'üéà', 'üç≠', 'ü¶ã', 'üåª', 'üç™', 'üéÅ', 'üêù'];
        let currentEmoji = 'üçé';
        let correctAnswer = 0;
        let score = 0;

        // Initialize the page
        function init() {
            generateAlphabetGrid();
            generateNumberGrid();
            generateQuestion();
        }

        // Generate alphabet grid
        function generateAlphabetGrid() {
            const grid = document.getElementById('alphabet-grid');
            const letters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ';
            
            letters.split('').forEach(letter => {
                const button = document.createElement('button');
                button.className = 'letter-card';
                button.textContent = letter;
                button.onclick = () => showWord(letter);
                grid.appendChild(button);
            });
        }

        // Generate number grid
        function generateNumberGrid() {
            const grid = document.getElementById('number-grid');
            
            for (let i = 1; i <= 10; i++) {
                const button = document.createElement('button');
                button.className = 'number-card';
                button.textContent = i;
                button.onclick = () => speakNumber(i);
                grid.appendChild(button);
            }
        }

        // Show word for selected letter
        function showWord(letter) {
            const data = wordData[letter];
            document.getElementById('word-image').textContent = data.emoji;
            document.getElementById('current-word').textContent = data.word;
            
            const syllablesHtml = data.syllables.map(s => `<span>${s}</span>`).join(' - ');
            document.getElementById('syllables').innerHTML = syllablesHtml;

            // Add pronunciation (using Web Speech API if available)
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel(); // Cancel any previous speech
                const utterance = new SpeechSynthesisUtterance(data.word);
                utterance.lang = 'id-ID';
                utterance.rate = 0.7;
                speechSynthesis.speak(utterance);
            }
        }

        // Speak number
        function speakNumber(num) {
            if ('speechSynthesis' in window) {
                speechSynthesis.cancel(); // Cancel any previous speech
                const utterance = new SpeechSynthesisUtterance(num.toString());
                utterance.lang = 'id-ID';
                utterance.rate = 0.7;
                speechSynthesis.speak(utterance);
            }
        }

        // Switch between sections
        function showSection(section) {
            document.querySelectorAll('.section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            
            document.getElementById(section + '-section').classList.add('active');
            document.querySelector('.tab-btn.' + section).classList.add('active');
        }

        // Generate math question
        function generateQuestion() {
            const difficulty = document.getElementById('difficulty').value;
            let maxNum = 10;
            
            if (difficulty === 'medium') maxNum = 20;
            else if (difficulty === 'hard') maxNum = 50;

            // Randomly choose addition or subtraction
            const isAddition = Math.random() > 0.5;
            
            let num1, num2;
            if (isAddition) {
                num1 = Math.floor(Math.random() * maxNum) + 1;
                num2 = Math.floor(Math.random() * maxNum) + 1;
            } else {
                // For subtraction, ensure num1 >= num2 to avoid negative results
                num1 = Math.floor(Math.random() * maxNum) + 1;
                num2 = Math.floor(Math.random() * num1) + 1;
            }
            
            document.getElementById('num1').textContent = num1;
            document.getElementById('num2').textContent = num2;
            document.getElementById('operator').textContent = isAddition ? '+' : '-';
            
            correctAnswer = isAddition ? num1 + num2 : num1 - num2;
            
            // Update visual objects
            currentEmoji = countingEmojis[Math.floor(Math.random() * countingEmojis.length)];
            
            const maxVisual = 15; // Limit visual objects for better display
            const visual1 = Math.min(num1, maxVisual);
            const visual2 = Math.min(num2, maxVisual);
            
            // For subtraction, show crossed-out objects to represent removal
            if (isAddition) {
                document.getElementById('objects1').textContent = currentEmoji.repeat(visual1);
                document.getElementById('objects2').textContent = currentEmoji.repeat(visual2);
            } else {
                document.getElementById('objects1').textContent = currentEmoji.repeat(visual1);
                document.getElementById('objects2').innerHTML = '<span style="opacity: 0.4; text-decoration: line-through;">' + currentEmoji.repeat(visual2) + '</span>';
            }
            
            // Clear input and feedback
            document.getElementById('answer-input').value = '';
            document.getElementById('feedback').classList.remove('show', 'correct', 'incorrect');
            document.getElementById('answer-input').focus();
        }

        // Check answer
        function checkAnswer() {
            const userAnswer = parseInt(document.getElementById('answer-input').value);
            const feedback = document.getElementById('feedback');
            
            if (isNaN(userAnswer)) {
                feedback.textContent = 'ü§î Masukkan angka dulu ya!';
                feedback.className = 'feedback show incorrect';
                return;
            }
            
            if (userAnswer === correctAnswer) {
                score += 10;
                document.getElementById('score').textContent = score;
                feedback.textContent = 'üéâ BENAR! Kamu hebat! üåü';
                feedback.className = 'feedback show correct';
                
                // Auto generate new question after correct answer
                setTimeout(generateQuestion, 1500);
            } else {
                feedback.textContent = `üòÖ Coba lagi! Jawabannya adalah ${correctAnswer}`;
                feedback.className = 'feedback show incorrect';
            }
        }

        // Handle Enter key for answer input
        document.addEventListener('keypress', function(e) {
            if (e.key === 'Enter' && document.activeElement.id === 'answer-input') {
                checkAnswer();
            }
        });

        // Initialize on page load
        setupNameInput();
        setupChangeNameInput();
        checkExistingUser();
    </script>
</body>
</html>
